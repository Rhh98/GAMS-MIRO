GAMS 31.1.0  r55b6ce3 Released May  1, 2020 WEX-WEI x86 64bit/MS Windows - 07/02/20 15:27:13 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1   
   2  * Facility Layout Optimization
   3   
   4  Option optcr=0.01;
   5  Option Optca=0;
   6   
   7  Set Machines /CNC, Mill, Drill, Punch/;
   8  Set Products /P1,P2,P3/;
   9   
  10  Alias(Machines,m1,m2);
  11   
  12   
  13  *Initial Co-ordinates of Machines
  14  set coord /X,Y/
  15      RS recieving and shipping /R,S/;
  17  table Mcoord (machines,coord) 'Machine co-coordinates'
  18        X    Y
  19  CNC   100  200
  20  Drill 200  100
  21  Mill  300  100
  22  Punch 100  300;
  23   
  24  * Co-ordinates of Shipping and Receiving
  25  table RScoord(RS,coord) 'Recieving and Shipping co-coordinates'
  26     X    Y
  27  R  500  125
  28  S  715  450;
  29   
  30  *Minimum Distance
  31  Parameter
  32    Min_Distance(Machines,Machines) 'Minimum distance between different machines' /
  33     CNC.Mill 50,
  34     CNC.Drill 50,
  35     CNC.Punch 50
  36  /;
  37   
  38  *Costing Data
  39  Parameters CM(Machines) 'Cost of moving machines per distance unit'/set.Machines 300/, CH(Products) 'Cost of moving products per distance unit' /set.Products 100/;
  41  Set Arcs(Products, Machines, Machines);
  42  Arcs('P1','CNC', 'Drill')=yes;
  43  Arcs('P1','Drill', 'Punch')=yes;
  44  Arcs('P2','Mill', 'Drill')=yes;
  45  Arcs('P2','Drill', 'Punch')=yes;
  46  Arcs('P3','CNC', 'Drill')=yes;
  47  Arcs('P3','Drill', 'Mill')=yes;
  48  Arcs('P3','Mill', 'Punch')=yes;
  49  *Area for Machine movement restriction
  50  set lucoord /Xlow,Xup,Ylow,Yup/;
  52  table LowUpCoord(Machines,lucoord) "lower and upper bound of the co-coordinats of machines"
  53         Xlow    Xup  Ylow  Yup
  54  CNC    155     300  100   300
  55  Drill  100     300  100   300
  56  Punch  221     300  100   293
  57  Mill   100     228  100   300
  58  ;
  60   
  61  *Initial Distance Matrix
  62  Parameter Distances(Machines,Machines);
  63  alias(m1,m2,Machines);
  64  Distances(m1,m2)=sqrt(sqr(Mcoord(m1,'X')-Mcoord(m2,'X'))+  sqr(Mcoord(m1,'Y')-Mcoord(m2,'Y')));
  65   
  66  free variable cost;
  67  variable X_new(Machines), Y_new(Machines);
  68   
  69  Equations
  70  Objective,
  71  Min_Dist(Machines,Machines);
  72   
  73  Objective..
  74  cost =E= sum(Machines,CM(Machines)*sqrt(sqr(X_new(Machines)-Mcoord(Machines,'X'))+  sqr(Y_new(Machines)-Mcoord(Machines,'Y'))))
  75         + sum((Products,m1,m2)$Arcs(Products,m1,m2), CH(Products)*(sqrt(sqr(X_new(m1)-X_new(m2))+  sqr(Y_new(m1)-Y_new(m2)))- sqrt(sqr(Mcoord(m1,'X')-Mcoord(m2,'X'))+  sqr(Mcoord(m1,'Y')-Mcoord(m2,'Y')))))
  76         + (CH('P1')+CH('P3'))*(sqrt(sqr(X_new('CNC')-RScoord('R','X'))+ sqr(Y_new('CNC')-RScoord('R','Y')))-sqrt(sqr(Mcoord('CNC','X')-RScoord('R','X'))+ sqr(Mcoord('CNC','Y')-RScoord('R','Y')))) + CH('P2')*(sqrt(sqr(X_new('Mill')-RScoord('R','X'))+
  77         sqr(Y_new('Mill')-RScoord('R','Y')))-sqrt(sqr(Mcoord('Mill','X')-RScoord('R','X'))+ sqr(Mcoord('Mill','y')-RScoord('R','Y'))))
  78         + (CH('P1')+CH('P2')+CH('P3'))*(sqrt(sqr(X_new('Punch')-RScoord('S','X'))+ sqr(Y_new('Punch')-RScoord('S','Y')))-sqrt(sqr(Mcoord('Punch','X')-RScoord('S','X'))+ sqr(Mcoord('Punch','Y')-RScoord('S','Y'))));
  79   
  80  Min_Dist(m1,m2)$(ord(m1) <> ord(m2))..
  81  sqrt(sqr(X_new(m1)-X_new(m2))+  sqr(Y_new(m1)-Y_new(m2))) =G= Min_Distance(m1,m2)+30;
  82   
  83  model Facility_Layout /all/;
  84   
  85  option nlp=baron;
  86  Facility_Layout.optcr = 1e-4;
  87   
  88  X_new.lo(Machines) = LowUpcoord(Machines,'xlow');
  89  Y_new.lo(Machines) = LowUpcoord(Machines,'ylow');
  90  X_new.up(Machines) = LowUpcoord(Machines,'xup');
  91  Y_new.up(Machines) = LowUpcoord(Machines,'yup');
  92   
  93  solve Facility_Layout using nlp minimizing cost;
  94  Set resultHeader /x,y,newx,newy,CH,CM,XR,YR,XS,YS,status/;
  95   
  97  table result  (machines,products,resultHeader)'result for old layout';
  98  scalar Mcost Total cost of moving machines to new location
  99  POldcost Total cost of moving 3 products in old layout
 100  PNewcost Total cost of moving 3 products in new layout;
 101  Mcost=sum(Machines,CM(Machines)*sqrt(sqr(X_new.l(Machines)-Mcoord(Machines,'X'))+  sqr(Y_new.l(Machines)-Mcoord(Machines,'Y'))));
 102  POldcost =sum((Products,m1,m2)$Arcs(Products,m1,m2), CH(Products)*( sqrt(sqr(Mcoord(m1,'X')-Mcoord(m2,'X'))+  sqr(Mcoord(m1,'Y')-Mcoord(m2,'Y')))))
 103         + (CH('P1')+CH('P3'))*(sqrt(sqr(Mcoord('CNC','X')-RScoord('R','X'))+ sqr(Mcoord('CNC','Y')-RScoord('R','Y')))) + CH('P2')*(sqrt(sqr(Mcoord('Mill','X')-RScoord('R','X'))+ sqr(Mcoord('Mill','y')-RScoord('R','Y'))))
 104         + (CH('P1')+CH('P2')+CH('P3'))*(sqrt(sqr(Mcoord('Punch','X')-RScoord('S','X'))+ sqr(Mcoord('Punch','Y')-RScoord('S','Y'))));
 105  PNewcost=sum((Products,m1,m2)$Arcs(Products,m1,m2), CH(Products)*(sqrt(sqr(X_new.l(m1)-X_new.l(m2))+  sqr(Y_new.l(m1)-Y_new.l(m2)))))
 106         + (CH('P1')+CH('P3'))*(sqrt(sqr(X_new.l('CNC')-RScoord('R','X'))+ sqr(Y_new.l('CNC')-RScoord('R','Y')))) + CH('P2')*(sqrt(sqr(X_new.l('Mill')-RScoord('R','X'))+
 107         sqr(Y_new.l('Mill')-RScoord('R','Y'))))
 108         + (CH('P1')+CH('P2')+CH('P3'))*(sqrt(sqr(X_new.l('Punch')-RScoord('S','X'))+ sqr(Y_new.l('Punch')-RScoord('S','Y'))));
 109   
 111   
 112  result(machines,products,'newx')=x_new.l(Machines);
 113  result(machines,products,'newy')=y_new.l(Machines);
 114  result(machines,products,'x')=mcoord(Machines,'x');
 115  result(machines,products,'y')=mcoord(Machines,'y');
 116  result(machines,products,'CH')=CH(products);
 117  result(machines,products,'CM')=CM(machines);
 118  result(machines,products,'XR')=RScoord('R','X');
 119  result(machines,products,'XS')=RScoord('S','X');
 120  result(machines,products,'YR')=RScoord('R','Y');
 121  result(machines,products,'YS')=RScoord('S','Y');
 122  result(machines,products,'status')=facility_layout.suminfes+1;
 123   
 124   


COMPILATION TIME     =        0.000 SECONDS      3 MB  31.1.0 r55b6ce3 WEX-WEI
GAMS 31.1.0  r55b6ce3 Released May  1, 2020 WEX-WEI x86 64bit/MS Windows - 07/02/20 15:27:13 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Equation Listing    SOLVE Facility_Layout Using NLP From line 93


---- Objective  =E=  

Objective..  cost - (145.098665735068)*X_new(CNC) + (499.805257848289)*X_new(Mill) + (700)*X_new(Drill) - (210.503498736116)*X_new(Punch) + (277.319624718688)*Y_new(CNC) + (6.23782861551805)*Y_new(Mill) + (0)*Y_new(Drill) + (430.11263940086)*Y_new(Punch)
      =E= -412748.180010247 ; (LHS = -532550.001043358, INFES = 119801.821033111 ****)
     

---- Min_Dist  =G=  

Min_Dist(CNC,Mill)..  (1)*X_new(CNC) - (1)*X_new(Mill) + (0)*Y_new(CNC) + (0)*Y_new(Mill) =G= 80 ; (LHS = 55, INFES = 25 ****)
     
Min_Dist(CNC,Drill)..  (1)*X_new(CNC) - (1)*X_new(Drill) + (0)*Y_new(CNC) + (0)*Y_new(Drill) =G= 80 ; (LHS = 55, INFES = 25 ****)
     
Min_Dist(CNC,Punch)..  - (1)*X_new(CNC) + (1)*X_new(Punch) + (0)*Y_new(CNC) + (0)*Y_new(Punch) =G= 80 ; (LHS = 66, INFES = 14 ****)
     
REMAINING 9 ENTRIES SKIPPED

GAMS 31.1.0  r55b6ce3 Released May  1, 2020 WEX-WEI x86 64bit/MS Windows - 07/02/20 15:27:13 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Column Listing      SOLVE Facility_Layout Using NLP From line 93


---- cost  

cost
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       Objective


---- X_new  

X_new(CNC)
                (.LO, .L, .UP, .M = 155, 155, 300, 0)
    (-145.0987) Objective
       (1)      Min_Dist(CNC,Mill)
       (1)      Min_Dist(CNC,Drill)
      (-1)      Min_Dist(CNC,Punch)
       (1)      Min_Dist(Mill,CNC)
       (1)      Min_Dist(Drill,CNC)
      (-1)      Min_Dist(Punch,CNC)
        0       (OLD LEVEL ****)

X_new(Mill)
                (.LO, .L, .UP, .M = 100, 100, 228, 0)
     (499.8053) Objective
      (-1)      Min_Dist(CNC,Mill)
      (-1)      Min_Dist(Mill,CNC)
       (0)      Min_Dist(Mill,Drill)
      (-1)      Min_Dist(Mill,Punch)
       (0)      Min_Dist(Drill,Mill)
      (-1)      Min_Dist(Punch,Mill)
        0       (OLD LEVEL ****)

X_new(Drill)
                (.LO, .L, .UP, .M = 100, 100, 300, 0)
     (700)      Objective
      (-1)      Min_Dist(CNC,Drill)
       (0)      Min_Dist(Mill,Drill)
      (-1)      Min_Dist(Drill,CNC)
       (0)      Min_Dist(Drill,Mill)
      (-1)      Min_Dist(Drill,Punch)
      (-1)      Min_Dist(Punch,Drill)
        0       (OLD LEVEL ****)

REMAINING ENTRY SKIPPED

---- Y_new  

Y_new(CNC)
                (.LO, .L, .UP, .M = 100, 100, 300, 0)
     (277.3196) Objective
       (0)      Min_Dist(CNC,Mill)
       (0)      Min_Dist(CNC,Drill)
       (0)      Min_Dist(CNC,Punch)
       (0)      Min_Dist(Mill,CNC)
       (0)      Min_Dist(Drill,CNC)
       (0)      Min_Dist(Punch,CNC)
        0       (OLD LEVEL ****)

Y_new(Mill)
                (.LO, .L, .UP, .M = 100, 100, 300, 0)
       (6.2378) Objective
       (0)      Min_Dist(CNC,Mill)
       (0)      Min_Dist(Mill,CNC)
       (0)      Min_Dist(Mill,Drill)
       (0)      Min_Dist(Mill,Punch)
       (0)      Min_Dist(Drill,Mill)
       (0)      Min_Dist(Punch,Mill)
        0       (OLD LEVEL ****)

Y_new(Drill)
                (.LO, .L, .UP, .M = 100, 100, 300, 0)
       (0)      Objective
       (0)      Min_Dist(CNC,Drill)
       (0)      Min_Dist(Mill,Drill)
       (0)      Min_Dist(Drill,CNC)
       (0)      Min_Dist(Drill,Mill)
       (0)      Min_Dist(Drill,Punch)
       (0)      Min_Dist(Punch,Drill)
        0       (OLD LEVEL ****)

REMAINING ENTRY SKIPPED
GAMS 31.1.0  r55b6ce3 Released May  1, 2020 WEX-WEI x86 64bit/MS Windows - 07/02/20 15:27:13 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Model Statistics    SOLVE Facility_Layout Using NLP From line 93


MODEL STATISTICS

BLOCKS OF EQUATIONS           2     SINGLE EQUATIONS           13
BLOCKS OF VARIABLES           3     SINGLE VARIABLES            9  8 projected
NON ZERO ELEMENTS            57     NON LINEAR N-Z             56
DERIVATIVE POOL              20     CONSTANT POOL              26
CODE LENGTH                 251


GENERATION TIME      =        0.032 SECONDS      4 MB  31.1.0 r55b6ce3 WEX-WEI


EXECUTION TIME       =        0.032 SECONDS      4 MB  31.1.0 r55b6ce3 WEX-WEI
GAMS 31.1.0  r55b6ce3 Released May  1, 2020 WEX-WEI x86 64bit/MS Windows - 07/02/20 15:27:13 Page 5
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE Facility_Layout Using NLP From line 93


               S O L V E      S U M M A R Y

     MODEL   Facility_Layout     OBJECTIVE  cost
     TYPE    NLP                 DIRECTION  MINIMIZE
     SOLVER  BARON               FROM LINE  93

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      2 Locally Optimal           
**** OBJECTIVE VALUE           -10986.3105

 RESOURCE USAGE, LIMIT          0.950      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

GAMS/BARON       31.1.0 r55b6ce3 Released May 01, 2020 WEI x86 64bit/MS Window

BARON is a product of The Optimization Firm, LLC. http://www.minlp.com/
Parts of the BARON software were created at the
University of Illinois at Urbana-Champaign.


===========================================================================
 BARON version 20.4.14. Built: WIN-64 Tue Apr 14 21:05:00 EDT 2020

 BARON is a product of The Optimization Firm.
 For information on BARON, see https://minlp.com/about-baron

 If you use this software, please cite publications from
 https://minlp.com/baron-publications, such as: 

 Khajavirad, A. and N. V. Sahinidis,
 A hybrid LP/NLP paradigm for global optimization relaxations,
 Mathematical Programming Computation, 10, 383-421, 2018.
===========================================================================
 This BARON run may utilize the following subsolver(s)
 For LP/MIP/QP: ILOG CPLEX                                      
 For NLP: MINOS, SNOPT, GAMS external NLP, IPOPT, FILTERSD, FILTERSQP

Solution      = -10986.3105324263  best solution found during preprocessing
Best possible = -10987.4092734
Absolute gap  = 1.09874097371357  optca = 1E-9
Relative gap  = 0.00010000000422061  optcr = 0.0001
  (Note that BARON uses a different formula to compute the relative gap as
   was used for the above reported value.)


                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU Objective    -412748.1800   -412748.1800   -412748.1800         1.0000      

---- EQU Min_Dist  

                   LOWER          LEVEL          UPPER         MARGINAL

CNC  .Mill         80.0000        90.8553        +INF             .          
CNC  .Drill        80.0000        80.0000        +INF           93.7293      
CNC  .Punch        80.0000        80.0000        +INF            9.9911      
Mill .CNC          30.0000        90.8553        +INF             .          
Mill .Drill        30.0000        30.0000        +INF          160.2776      
Mill .Punch        30.0000        99.5384        +INF             .          
Drill.CNC          30.0000        80.0000        +INF             .          
Drill.Mill         30.0000        30.0000        +INF             .          
Drill.Punch        30.0000       112.9613        +INF             .          
Punch.CNC          30.0000        80.0000        +INF             .          
Punch.Mill         30.0000        99.5384        +INF             .          
Punch.Drill        30.0000       112.9613        +INF             .          

                           LOWER          LEVEL          UPPER         MARGINAL

---- VAR cost              -INF       -10986.3105        +INF             .          

---- VAR X_new  

             LOWER          LEVEL          UPPER         MARGINAL

CNC         155.0000       155.0000       300.0000        24.0607      
Mill        100.0000       228.0000       228.0000      -343.9926      
Drill       100.0000       200.4075       300.0000          .          
Punch       221.0000       221.0054       300.0000          .          

---- VAR Y_new  

             LOWER          LEVEL          UPPER         MARGINAL

CNC         100.0000       175.4930       300.0000          .          
Mill        100.0000       121.4034       300.0000          .          
Drill       100.0000       109.6283       300.0000          .          
Punch       100.0000       220.6958       293.0000          .          


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
                             0     ERRORS
                             5  PROJECTED
GAMS 31.1.0  r55b6ce3 Released May  1, 2020 WEX-WEI x86 64bit/MS Windows - 07/02/20 15:27:13 Page 6
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


EXECUTION TIME       =        0.000 SECONDS      3 MB  31.1.0 r55b6ce3 WEX-WEI


USER: CS526 Advanced Linear Programming              G200210/0001AS-GEN
      Course License UW-Madison, Prof Ferris, Spring 2020        DCE515
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\hasee\Documents\GitHub\GAMS-MIRO\facloc\model.gms
Output     C:\Users\hasee\Documents\GitHub\GAMS-MIRO\facloc\model.lst
